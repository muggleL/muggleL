<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>ğŸ¹Rust Trait - Muggle L</title>
    <meta property="og:title" content="ğŸ¹Rust Trait - Muggle L">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="traitæ˜¯å¯¹ç±»å‹çš„è¡Œä¸ºçº¦æŸï¼Œä¸»è¦æœ‰å¦‚ä¸‹4ç§ç”¨æ³•ï¼š
[&amp;hellip;] Rust çš„æ¥å£æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š
[&amp;hellip;] å®ä¾‹1: ä¸ºè‡ªå®šä¹‰ç±»å‹å®ç°åŠ æ³•æ¥å£
[&amp;hellip;] use std::ops::Add; #[derive(Debug)] struct Point { x: i32, y: i32, } impl Add for Point { type Output = &amp;hellip;">
      <meta property="og:description" content="traitæ˜¯å¯¹ç±»å‹çš„è¡Œä¸ºçº¦æŸï¼Œä¸»è¦æœ‰å¦‚ä¸‹4ç§ç”¨æ³•ï¼š
[&amp;hellip;] Rust çš„æ¥å£æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š
[&amp;hellip;] å®ä¾‹1: ä¸ºè‡ªå®šä¹‰ç±»å‹å®ç°åŠ æ³•æ¥å£
[&amp;hellip;] use std::ops::Add; #[derive(Debug)] struct Point { x: i32, y: i32, } impl Add for Point { type Output = &amp;hellip;">
      
    

    
    

    

    
    


<link href='//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/styles/agate.min.css' rel='stylesheet' type='text/css' />




    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="post">
    <header class="masthead">
      <h1><a href="/">Muggle L</a></h1>

<p class="tagline">Technology Is Muggle&#39;s Magic</p>

      <nav class="menu">
  <input id="menu-check" type="checkbox" />
  <label id="menu-label" for="menu-check" class="unselectable">
    <span class="icon close-icon">âœ•</span>
    <span class="icon open-icon">â˜°</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/">Home</a></li>
  
  <li><a href="/search/">Search</a></li>
  
  <li><a href="/categories/">Categories</a></li>
  
  <li><a href="/tags/">Tags</a></li>
  
  <li><a href="/pdfs/">Pdfs</a></li>
  
  <li><a href="/slice/">Slice</a></li>
  
  <li><a href="/do-not-eat-those/">DO NOT EAT THOSE</a></li>
  
  <li><a href="https://git.mygoooosh.com/explore/repos">MyGoooosh Git</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      


<h1>ğŸ¹Rust Trait</h1>

<h3>DG
  /  2020-09-13</h3>
<hr>



      </header>






<p>traitæ˜¯å¯¹ç±»å‹çš„è¡Œä¸ºçº¦æŸï¼Œä¸»è¦æœ‰å¦‚ä¸‹4ç§ç”¨æ³•ï¼š</p>
<ul>
<li>æ¥å£æŠ½è±¡ã€‚</li>
<li>æ³›å‹çº¦æŸã€‚</li>
<li>æŠ½è±¡ç±»å‹ã€‚</li>
<li>æ ‡ç­¾ traitã€‚</li>
</ul>
<h2 id="æ¥å£æŠ½è±¡">æ¥å£æŠ½è±¡</h2>
<p>Rust çš„æ¥å£æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å¯ä»¥è‡ªå®šä¹‰æ–¹æ³•ï¼Œæ”¯æŒé»˜è®¤å®ç°ã€‚</li>
<li>æ¥å£ä¹‹é—´å¯ç»§æ‰¿ä¸å¯å®ç°ï¼ˆä¸å¯ä»¥ç”¨ä¸€ä¸ªæ¥å£å®ç°å¦ä¸€ä¸ªæ¥å£ï¼‰ã€‚</li>
<li>åŒä¸€ä¸ªæ¥å£å¯ä»¥è¢«å¤šä¸ªç±»å‹å®ç°ï¼Œä½†ä¸èƒ½è¢«ä¸€ä¸ªç±»å‹å¤šæ¬¡å®ç°ã€‚</li>
<li>impl å…³é”®å­—ä¸ºç±»å‹å®ç°æ¥å£çš„æ–¹æ³•ã€‚</li>
<li>trait å…³é”®å­—å®šä¹‰æ¥å£ã€‚</li>
</ul>
<p>å®ä¾‹1: ä¸ºè‡ªå®šä¹‰ç±»å‹å®ç°åŠ æ³•æ¥å£</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#66d9ef">use</span> std::ops::Add;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#[derive(Debug)]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Point</span> {
</span></span><span style="display:flex;"><span>    x: <span style="color:#66d9ef">i32</span>,
</span></span><span style="display:flex;"><span>    y: <span style="color:#66d9ef">i32</span>,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">impl</span> Add <span style="color:#66d9ef">for</span> Point {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Output</span> <span style="color:#f92672">=</span> Point;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">add</span>(self, other: <span style="color:#a6e22e">Point</span>) -&gt; <span style="color:#a6e22e">Self</span> {
</span></span><span style="display:flex;"><span>        Point {
</span></span><span style="display:flex;"><span>            x: <span style="color:#a6e22e">self</span>.x <span style="color:#f92672">+</span> other.x,
</span></span><span style="display:flex;"><span>            y: <span style="color:#a6e22e">self</span>.y <span style="color:#f92672">+</span> other.y,
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">test</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> point <span style="color:#f92672">=</span> Point{x: <span style="color:#ae81ff">1</span>, y: <span style="color:#ae81ff">3</span>};
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> other <span style="color:#f92672">=</span> Point{x: <span style="color:#ae81ff">3</span>, y: <span style="color:#ae81ff">2</span>};
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> result <span style="color:#f92672">=</span> point <span style="color:#f92672">+</span> other;
</span></span><span style="display:flex;"><span>    println!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">.&#34;</span>, result);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>Output æŒ‡å®šè¿”å›å€¼ç±»å‹
å‡½æ•°ç§ è¿”å›å€¼å¯ä»¥å†™æˆ Selfã€Point æˆ– Self::Point</p>
</blockquote>
<h3 id="trait-æ¥å£ç»§æ‰¿">trait æ¥å£ç»§æ‰¿</h3>
<p>å­ trait å¯ä»¥ç»§æ‰¿çˆ¶ trait ä¸­å®šä¹‰æˆ–è€…å®ç°çš„æ–¹æ³•ã€‚
ä»¥ä¸‹æ˜¯ä¸€ä¸ªåˆ†é¡µä¸ºä¾‹çš„ trait ç»§æ‰¿å®ä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#66d9ef">trait</span> Page {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">set_page</span>(<span style="color:#f92672">&amp;</span>self, p: <span style="color:#66d9ef">i32</span>) {
</span></span><span style="display:flex;"><span>        println!(<span style="color:#e6db74">&#34;Page Defualt: </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">.&#34;</span>, p);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">trait</span> Perpage {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">set_prepage</span>(<span style="color:#f92672">&amp;</span>self, num: <span style="color:#66d9ef">i32</span>) {
</span></span><span style="display:flex;"><span>        println!(<span style="color:#e6db74">&#34;Per Page Defualt: </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span>, num);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">MyPaginate</span>{
</span></span><span style="display:flex;"><span>    page: <span style="color:#66d9ef">i32</span>,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">impl</span> Page <span style="color:#66d9ef">for</span> MyPaginate {}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">impl</span> Perpage <span style="color:#66d9ef">for</span> MyPaginate{}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">trait</span> Paginate: <span style="color:#a6e22e">Page</span> <span style="color:#f92672">+</span> Perpage {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">set_skip_page</span>(<span style="color:#f92672">&amp;</span>self, num: <span style="color:#66d9ef">i32</span>) {
</span></span><span style="display:flex;"><span>        println!(<span style="color:#e6db74">&#34;Skip Page: </span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">.&#34;</span>, num);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">impl</span> <span style="color:#f92672">&lt;</span>T: <span style="color:#a6e22e">Page</span> <span style="color:#f92672">+</span> Perpage<span style="color:#f92672">&gt;</span> Paginate <span style="color:#66d9ef">for</span> T {} <span style="color:#75715e">// ä¸ºæ‰€æœ‰å®ç°äº† Page ã€ Perpage çš„ç±»å‹å®ç° Paginate
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">test</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> my_paginate <span style="color:#f92672">=</span> MyPaginate{page: <span style="color:#ae81ff">1</span>};
</span></span><span style="display:flex;"><span>    my_paginate.set_page(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    my_paginate.set_prepage(<span style="color:#ae81ff">100</span>);
</span></span><span style="display:flex;"><span>    my_paginate.set_skip_page(<span style="color:#ae81ff">12</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>ä¸ºä»€ä¹ˆä¸å¯ä»¥ç›´æ¥åªå®ç° Paginate ï¼Ÿï¼Ÿå¦‚æœçœŸçš„æ˜¯ç»§æ‰¿çš„è¯ï¼ŒPaginateé‡Œé¢åº”è¯¥åŒ…å«äº† Page å’Œ Prepage çš„è¡Œä¸ºã€‚å¦‚æœåƒä¸Šä¸ªä¾‹å­ä¸­çš„ä»£ç ï¼ŒPaginate ç›´æ¥æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ trait ä¸ç»§æ‰¿ Page ä¸ Prepage ä»£ç åŠŸèƒ½ä¹Ÿä¸ä¼šæœ‰ä»»ä½•å˜åŒ–ã€‚å¯èƒ½ä½œè€…ä½¿ç”¨çš„è¿™ä¸ªä¾‹å­æœ‰é—®é¢˜ï¼Œè¿™ä¸ªä¾‹å­å¯¹ç†è§£Rust ç»§æ‰¿æ¯«æ— å¸®åŠ©ã€‚</p>
</blockquote>
<h2 id="æ³›å‹çº¦æŸ">æ³›å‹çº¦æŸ</h2>
<p>æœ‰ä¸€äº›æ³›å‹å‡½æ•°åœ¨éœ€è¦æœ‰ä¸€å®šçš„çº¦æŸæ‰èƒ½è¿è¡Œæˆ–è€…æ˜¯æœ‰æ„ä¹‰ï¼Œæ¯”å¦‚ä¸€ä¸ªæ³›å‹çš„æ±‚å’Œå‡½æ•°ï¼Œå¦‚æœä¼ å…¥ä¸¤ä¸ªæ•°å­—ï¼Œåˆ™å¯ä»¥è®¡ç®—åŠ æ³•ã€‚å¦‚æœä¼ å…¥ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿæ˜¯å¯ä»¥å‹‰å¼ºç†è§£æˆå°†ä¸¤ä¸ªå­—ç¬¦ä¸²æ‹¼æ¥ã€‚ä½†æ˜¯å¦‚æœä¼ å…¥ä¸¤ä¸ªå¸ƒå°”ç±»å‹ï¼Œåˆ™å°±æ¯«æ— æ„ä¹‰äº†ã€‚å› æ­¤å¯ä»¥ä½¿ç”¨ trait å¯¹æ³›å‹é€‚ç”¨çš„ç±»å‹è¿›è¡Œçº¦æŸã€‚
æ±‚å’Œæ³›å‹çº¦æŸå®ä¾‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> std::ops::Add;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">sum</span><span style="color:#f92672">&lt;</span>T: <span style="color:#a6e22e">Add</span><span style="color:#f92672">&lt;</span>T, Output<span style="color:#f92672">=</span>T<span style="color:#f92672">&gt;&gt;</span>(a: <span style="color:#a6e22e">T</span>, b: <span style="color:#a6e22e">T</span>) -&gt; <span style="color:#a6e22e">T</span> { <span style="color:#75715e">// åªæœ‰å®ç°äº† add åŠ å·ä¸¤è¾¹ç±»å‹è¿”å›å€¼ç±»å‹ä¸€è‡´çš„ç±»å‹é€‚ç”¨
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    a <span style="color:#f92672">+</span> b
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">test</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> result <span style="color:#f92672">=</span> sum(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">100</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//let r2 = sum(&#34;aa&#34;, &#34;bb&#34;); // &amp;str æ²¡æœ‰å®ç°åŠ æ³• æ‰€ä»¥æŠ¥é”™
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> r3 <span style="color:#f92672">=</span> sum(<span style="color:#ae81ff">1.0</span>, <span style="color:#ae81ff">2.0</span>);
</span></span><span style="display:flex;"><span>    println!(<span style="color:#e6db74">&#34;result1: </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">, r2: </span><span style="color:#ae81ff">{{}}</span><span style="color:#e6db74">, r3: </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">.&#34;</span>, result, <span style="color:#75715e">/*r2, */</span> r3);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="æŠ½è±¡ç±»å‹">æŠ½è±¡ç±»å‹</h2>
<h3 id="traitobject">TraitObject</h3>
<p>TraitObject æ˜¯å°†å…·æœ‰ç›¸åŒè¡Œä¸ºçš„å…·ä½“ç±»å‹çš„é›†åˆæŠ½è±¡æˆä¸€ä¸ªä¸å¯å®ä¾‹åŒ–çš„ç±»å‹ï¼Œç­‰ä»·äºé¢å¯¹å¯¹è±¡è¯­è¨€ä¸­çš„æŠ½è±¡ç±»å‹ï¼ˆAbstract Objectï¼‰ã€‚
trait å¯¹è±¡å®ä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#75715e">#[derive(Debug)]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Foo</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">trait</span> Bar {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">baz</span>(<span style="color:#f92672">&amp;</span>self);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">impl</span> Bar <span style="color:#66d9ef">for</span> Foo {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">baz</span>(<span style="color:#f92672">&amp;</span>self) {
</span></span><span style="display:flex;"><span>        println!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">.&#34;</span>, self);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">static_dispatch</span><span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span>(t: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">T</span>) <span style="color:#66d9ef">where</span> T: <span style="color:#a6e22e">Bar</span> { <span style="color:#75715e">// è¿™é‡Œæ˜¯ trait æ³›å‹é™å®š
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    t.baz();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">dynamic_dispatch</span>(t: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">dyn</span> Bar) { <span style="color:#75715e">// Bar è¢«å½“æˆäº†ä¸€ä¸ªç±»å‹ã€‚ï¼ˆåŠ¨æ€åˆ†å‘ï¼Œtrait 2018 æ·»åŠ  dyn å…³é”®è¯è·Ÿimpl trait çš„é™æ€åˆ†å‘ä»¥ç¤ºåŒºåˆ«ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    t.baz();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">test</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> foo <span style="color:#f92672">=</span> Foo;
</span></span><span style="display:flex;"><span>    static_dispatch(<span style="color:#f92672">&amp;</span>foo);
</span></span><span style="display:flex;"><span>    dynamic_dispatch(<span style="color:#f92672">&amp;</span>foo);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="impl-trait">Impl Trait</h3>
<p>Impl Trait ç›®å‰åªèƒ½åœ¨å…¥å‚å’Œè¿”å›å€¼ä¸¤ä¸ªåœ°æ–¹ä½¿ç”¨ã€‚Impl Trait æŠ½è±¡é™å®šä½¿ç”¨çš„æ˜¯é™æ€åˆ†å‘ï¼Œèƒ½å¤Ÿåœ¨è°ƒç”¨æ—¶æ ¹æ®ä¸Šä¸‹æ–‡ä¿¡æ¯æ¨å¯¼å‡ºå…·ä½“ç±»å‹ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#66d9ef">use</span> std::fmt::Debug;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">trait</span> Fly {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">fly</span>(<span style="color:#f92672">&amp;</span>self) -&gt; <span style="color:#66d9ef">bool</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#[derive(Debug)]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Duck</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#[derive(Debug)]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Pig</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">impl</span> Fly <span style="color:#66d9ef">for</span> Duck {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">fly</span>(<span style="color:#f92672">&amp;</span>self) -&gt; <span style="color:#66d9ef">bool</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">impl</span> Fly <span style="color:#66d9ef">for</span> Pig {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">fly</span>(<span style="color:#f92672">&amp;</span>self) -&gt; <span style="color:#66d9ef">bool</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">fly_static</span>(s: <span style="color:#a6e22e">impl</span> Fly <span style="color:#f92672">+</span> Debug) -&gt; <span style="color:#66d9ef">bool</span> { <span style="color:#75715e">// impl ä½œä¸ºå‚æ•°ç±»å‹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    s.fly()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">can_fly</span>(s: <span style="color:#a6e22e">impl</span> Fly <span style="color:#f92672">+</span> Debug) -&gt; <span style="color:#a6e22e">impl</span> Fly { <span style="color:#75715e">// impl trait ä½œä¸ºè¿”å›å€¼ç±»å‹ ç»™è¿”å›å€¼æ·»åŠ é™å®šèŒƒå›´
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> s.fly() {
</span></span><span style="display:flex;"><span>        println!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74"> can fly.&#34;</span>, s);
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        println!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74"> can&#39;t fly.&#34;</span>, s);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    s
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">test</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> pig <span style="color:#f92672">=</span> Pig;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> duck <span style="color:#f92672">=</span> Duck;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    println!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">.&#34;</span>, fly_static(pig));
</span></span><span style="display:flex;"><span>    println!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">.&#34;</span>, fly_static(Duck));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> pig <span style="color:#f92672">=</span> Pig;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> duck <span style="color:#f92672">=</span> duck;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> _ <span style="color:#f92672">=</span> can_fly(pig);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> _ <span style="color:#f92672">=</span> can_fly(duck);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="æ ‡ç­¾-trait">æ ‡ç­¾ Trait</h2>
<p>æ ‡ç­¾ trait æ˜¯å¯¹ç±»å‹çš„çº¦æŸï¼Œå½“å¼€å‘è€…ä½¿ç”¨è¿™äº›å¸¦æœ‰çº¦æŸæ ‡ç­¾çš„ç±»å‹æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè¿›è¡Œä¸¥æ ¼æ£€æŸ¥ï¼Œç¡®ä¿è¿™äº›ç±»å‹æ˜¯â€˜åˆæ ¼â€™çš„ã€‚
Rust æä¾›äº†5ä¸ªé‡è¦çš„æ ‡ç­¾traitï¼Œéƒ½è¢«å®šä¹‰åœ¨ <code>std::marker</code> ä¸­ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯:</p>
<ul>
<li>Sized trait</li>
<li>Unsize trait</li>
<li>Copy trait</li>
<li>Send trait</li>
<li>Sync trait</li>
</ul>
<h3 id="sized-trait-ä¸-unsize-trait">Sized trait ä¸ Unsize trait</h3>
<p>Sized æ ‡ç­¾ç”¨æ¥åŠŸç¼–è¯‘å™¨è¯†åˆ«å¯ä»¥åœ¨ç¼–è¯‘å™¨ç¡®å®šå¤§å°çš„ç±»å‹ï¼ŒUnsizeåˆ™ä¸ä¹‹ç›¸åã€‚
Sized æ˜¯çº¯ç²¹çš„æ ‡ç­¾ï¼Œè¯¥trait çš„å®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#75715e">#[lang = </span><span style="color:#e6db74">&#34;sized&#34;</span><span style="color:#75715e">]</span> <span style="color:#75715e">// è¡¨ç¤ºSized çš„å£°æ˜ä¸º sized
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">trait</span> Sized {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// å®ç°ä¸ºç©º
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p>Rust ä¸­å¤§éƒ¨åˆ†ç±»å‹éƒ½æ˜¯é»˜è®¤ Sizedï¼Œå¦‚æ³›å‹ <code>struct Foo&lt;T&gt;(T)</code> ç­‰ä»·äº <code>struct Foo&lt;T: Sized&gt;(T)</code>ã€‚
Rust ä¸­æœ‰åªæœ‰ä¸¤ç§åŠ¨æ€å¤§å°çš„ç±»å‹ <code>trait</code> å’Œ <code>[T]</code>ã€‚ <code>[T]</code> è¡¨ç¤ºä¸€å®šæ•°é‡çš„ T åœ¨å†…å­˜ä¸­æ’åˆ—ï¼Œä½†æ˜¯ä¸çŸ¥é“å…·ä½“çš„æ•°é‡ï¼Œæ‰€ä»¥ä»–å¸¦ä¸‹æ˜¯ä¸ç¡®å®šçš„ã€‚ç”¨ <code>Unsize</code> æ¥æ ‡è®°ã€‚
<code>?sized</code> åŒ…å«äº†ä¸¤ç§æ ‡è®°ç±»å‹æ‰€ä»¥ <code>Bar&lt;T: ?sized&gt;(T)</code> æ”¯æŒç¼–è¯‘å…¶å¯ç¡®å®šå¤§å°çš„ç±»å‹å’Œä¸å¯ç¡®å®šå¤§å°çš„ç±»å‹ã€‚</p>
<h3 id="copy-trait">Copy trait</h3>
<h3 id="sync-trait-ä¸-send-trait">Sync trait ä¸ Send trait</h3>
<blockquote>
<p>æœªå®Œå¾…ç»­ &hellip;</p>
</blockquote>

<br>
<footer>
    
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/post/2020/sql-tutorial/">ğŸ¥ŠSQL æ‹¾é—</a></span>
  <span class="nav-next"><a href="/post/2020/c-sharp-note/">ğŸ¦C-Sharp ç¬”è®°</a> &rarr;</span>
</nav>





<script src="/js/math-code.js"></script>


<script type="text/javascript"
        async
        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
     
    color: #EE7700;
}
</style>
<script async src="/js/center-img.js"></script>

    



<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/highlight.min.js"></script>



<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/languages/yaml.min.js"></script>
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/languages/tex.min.js"></script>
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/languages/go.min.js"></script>
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/languages/powershell.min.js"></script>
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/languages/sql.min.js"></script>
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/languages/bash.min.js"></script>
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/languages/rust.min.js"></script>
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/languages/c#.min.js"></script>
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/languages/java.min.js"></script>
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/languages/c.min.js"></script>
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/languages/cpp.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



   
   <br>



  <hr>
  <div class="copyright">Â© <a href="https://blog.mygoooosh.com">DG</a> Since 2016 | <a href="https://github.com/muggleL">Github</a> | <a href="https://twitter.com/Modu_Chanyu6">Twitter</a> | Theme By <a href="https://yihui.name">Yihui Xie</a> | <a href="/index.xml">RSS</a> Feed</div>
  
  </footer>
  </article>
  
  </body>
</html>

   
